<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>LINEçˆ†æ’ƒãã‚“ ToDo</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #fefefe; }
    h1 { font-size: 1.8rem; }
    #todo-list { margin-top: 1rem; }
    .todo-item { margin-bottom: 0.5rem; }
  </style>
</head>
<body>
  <h1>ğŸ”¥ LINEçˆ†æ’ƒãã‚“</h1>
  <input id="todo-input" type="text" placeholder="ã‚„ã‚‹ã“ã¨ã‚’æ›¸ã..." />
  <button onclick="addTask()">è¿½åŠ </button>

  <div id="todo-list"></div>

  <script>
    let tasks = [];

    function addTask() {
      const input = document.getElementById('todo-input');
      const value = input.value.trim();
      if (!value) return;
      const task = { text: value, created: Date.now() };
      tasks.push(task);
      render();
      input.value = '';
    }

    function render() {
      const list = document.getElementById('todo-list');
      list.innerHTML = '';
      tasks.forEach((t, i) => {
        const el = document.createElement('div');
        el.className = 'todo-item';
        el.innerHTML = `${t.text} <button onclick="done(${i})">å®Œäº†</button>`;
        list.appendChild(el);
      });
    }

    function done(index) {
      tasks.splice(index, 1);
      render();
    }

    // å®šæœŸçš„ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã€Œæ”¾ç½®ã‚¿ã‚¹ã‚¯ãŒã‚ã‚‹ã‹ã€é€ä¿¡
    setInterval(() => {
      if (tasks.length > 0) {
        const now = Date.now();
        const oldest = Math.min(...tasks.map(t => t.created));
        const elapsed = (now - oldest) / 1000; // ç§’

        if (elapsed > 60) { // 60ç§’ä»¥ä¸Šæ”¾ç½®
          fetch('/notify', { method: 'POST' });
          console.log('âš ï¸ æ”¾ç½®æ¤œå‡º â†’ é€šçŸ¥ç™ºç«');
        }
      }
    }, 10000); // 10ç§’ã”ã¨ã«ç¢ºèª
  </script>
</body>
</html>
